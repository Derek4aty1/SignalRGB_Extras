<head>
  <meta charset="UTF-8">
  <title>MyScreenshare</title>
  <meta description="Python go brrrrrr.">
  <meta publisher="Derek Huber">
</head>
<body style="margin: 0; padding: 0;">
  <canvas id="exCanvas" width="320" height="200"></canvas>
</body>
<script>
  const canvas = document.getElementById('exCanvas');
  const ctx = canvas.getContext('2d');
  const width = 320;
  const height = 200;
  const fps = 50; // Canvas refreshes max of ~50
  let image = new Image();
  let time = performance.now();

  function update() {
    if (performance.now() > time + (1000 / fps)) {
      time = performance.now();
      fetch('http://localhost:8000/')
        .then(response => response.text())
        .then(data => image.src =  `data:image/png;base64,${data}`);
    }

    ctx.drawImage(image, 0, 0);

    window.requestAnimationFrame(update);
  }
  window.requestAnimationFrame(update);
</script>